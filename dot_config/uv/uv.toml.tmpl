# https://docs.astral.sh/uv/concepts/configuration-files/

{{- if .useChineseMirror }}
# Chinese PyPI mirrors for faster downloads behind GFW
# Multiple mirrors with fallback - if primary fails, tries next in order
#
# Available mirrors (ordered by typical speed):
#   - USTC: https://pypi.mirrors.ustc.edu.cn/simple/
#   - Aliyun: https://mirrors.aliyun.com/pypi/simple/
#   - Tuna: https://pypi.tuna.tsinghua.edu.cn/simple/
#   - Huawei: https://repo.huaweicloud.com/repository/pypi/simple/
#   - Tencent: https://mirrors.cloud.tencent.com/pypi/simple/

# Enable fallback to next mirror if primary fails
# "unsafe-first-match" is safe for public mirrors (all sync from PyPI)
index-strategy = "unsafe-first-match"

# Mirrors in priority order (first available wins)
[[index]]
url = "https://pypi.mirrors.ustc.edu.cn/simple/"

[[index]]
url = "https://mirrors.aliyun.com/pypi/simple/"

[[index]]
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"

# Legacy pip-compatible syntax for uv pip commands
[pip]
index-url = "https://pypi.mirrors.ustc.edu.cn/simple/"
extra-index-url = [
    "https://mirrors.aliyun.com/pypi/simple/",
    "https://pypi.tuna.tsinghua.edu.cn/simple/"
]
{{- end }}
